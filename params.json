{"name":"easy-slackbot","tagline":"Node.js slackbot with customizable commands that makes sense.","body":"# easy-slackbot [![npm version](https://badge.fury.io/js/easy-slackbot.svg)](https://badge.fury.io/js/easy-slackbot) [![issues](https://img.shields.io/github/issues/wsloth/easy-slackbot.svg)](https://github.com/wsloth/easy-slackbot/issues)\r\n\r\nNode.js slackbot with customizable commands that makes sense.\r\nAt it's core, easy-slackbot is a wrapper around the [slackbotapi](https://github.com/xBytez/slackbotapi)\r\nmodule made by @xBytez. I have tried to improve the ease of use of creating \r\ncustom commands by providing a high-level way to add functionality.\r\n\r\n## Installing\r\n\r\n    $ npm install easy-slackbot --save\r\n\r\n## Usage\r\n\r\n*Note:* `'use strict';` is required for this bot to run. `easy-slackbot` uses\r\nmany Ecmascript 6 features.\r\n\r\n```javascript\r\n'use strict'; // Important! This uses many ES6 features.\r\n\r\nvar slack = require('easy-slackbot');\r\nvar SlackBot = slack.Bot;\r\nvar Command = slack.Command;\r\n\r\n// Create your custom command\r\nclass MyCmd extends Command {\r\n    constructor(commands) {\r\n        // Commands are the commands that will trigger your handler\r\n        // can be 'string' or ['string', 'array']\r\n        super(commands);\r\n    }\r\n\r\n    // Override the default handler (!)\r\n    handler(data, ctx, slack, callback) {\r\n        // data = incoming message data. I recommend console.logging it\r\n        // ctx = commandtext. Array of words in message. Log it.\r\n        // slack = SlackBot instance. Use it to do slack.getUser(data.user).name\r\n        // callback = call this function with your response message.\r\n    \r\n        // This scope is NOT MyCmd. It is the SlackBot scope.\r\n        // To access private methods, I recommend making them\r\n        // static and accessing them through `MyCmd.Method()`\r\n        var response = 'Hello there!';\r\n        callback(response);\r\n    }\r\n}\r\n\r\n// Set up the bot\r\nvar bot = new SlackBot({\r\n    // API Auth token\r\n    token: '<your slack token>',\r\n    // Botname from @botmention\r\n    name: 'U0J1BG81G',\r\n    // Provide a onTeamJoin handler\r\n    welcome: function(data, ctx, slack, callback) {\r\n        callback('Welcome!');\r\n    },\r\n    // Command prefix\r\n    prefix: '!',\r\n    // Pass any custom commands\r\n    commands: [\r\n        new MyCmd(['hi', 'hello', 'hey']),\r\n    ],\r\n});\r\n\r\n// Add an anonymous function if you can't be bothered to\r\n// set up a whole extends Command class.\r\nbot.addCommandDirectly('help', (data, ctx, slack, callback) => {\r\n    callback('Read the docs, *fool*.');\r\n});\r\n\r\n// Connect async\r\nbot.connect();\r\n```\r\n\r\nDue to the way the `slackbotapi` works, channels and users cannot be \r\n`@username` or `#channelname`. They must be accessed by their unique ID.\r\nYou can find this ID by running the example code with your own API token.\r\nIf you add the bot to all channels, you can start typing in any of them and \r\ncheck the console output for the event which will list the channel ID and the \r\nuser ID of the person who is typing. Use this ID to create your custom commands.\r\n\r\nAlternatively, use `SlackBot.getChannel('#general')` to get a channel object \r\nwhich you can use in your code. This also works for the user ID. Simply use \r\n`SlackBot.getUser('username')` and you will get an user object.  \r\nAfter that, you can use the ID you extract from these objects to send a new \r\nmessage to a specific user or channel.\r\n\r\n## TODO\r\n\r\n* More detailed documentation\r\n* Adding custom `.on('event', ...)` handlers\r\n* Basically a high level wrapper around `slackbotapi`\r\n\r\n## License\r\n\r\nThis program is licensed under the GPL-3.0 license.\r\n\r\n## Documentation\r\n\r\nFor more detailed information, visit the [slackbotapi git repository.](https://github.com/xBytez/slackbotapi)  \r\nThese examples use `SlackBot.methodName()`, but you should be using your \r\ncreated instance of SlackBot. In the example above, you would use \r\n`bot.getChannel('#general')` to get the channel object.\r\n\r\n### Before connecting\r\n\r\n#### SlackBot.addCommand(command)\r\n```\r\n* Add a command to the bot.\r\n* @param {Command} command Instance of a Command class.\r\n* @example addCommand(new MyCommand())\r\n```\r\n\r\n#### SlackBot.addCommandDirectly(command, function)\r\nYou can use this to add commands without making use of the supplied `Command` \r\nclass. Simply specify a word which the command will be triggered on, and add a \r\nfunction that has 4 arguments `(data, commandtext, slack, callback)`. To respond,\r\nsimply use `callback('your response')`.\r\n```\r\n* Add a new command directly without using Command.\r\n* @param {string} cmd Lowercase string of command trigger word.\r\n* @param {Function} func Callback function that accepts 4 arguments.\r\n* @example addCommandDirectly('hello', (a, b, c, cb) => cb('Hey!'))\r\n```\r\n\r\n### SlackBot.connect()\r\nThis method will either work, or show you an appropriate error message.\r\n```\r\n* Initializes the registered commands and connects to Slack.\r\n```\r\n\r\n### After connecting\r\n\r\n#### SlackBot.getUser(term)\r\n```\r\n* Get a user by name or ID\r\n* @param  string  term  Search term\r\n* @return object        Returns object with user if found, else null.\r\n* @example getUser(\"xBytez\")\r\n```\r\n\r\n#### SlackBot.getUserByEmail(term)\r\n```\r\n* Get a user by e-mail address\r\n* @param  string  term  Search term\r\n* @return object        Returns object with user if found, else null.\r\n* @example getUserByEmail(\"slack@xbytez.eu\")\r\n```\r\n\r\n#### SlackBot.getChannel(term)\r\n```\r\n* Get a channel by name or ID\r\n* @param  string  term  Search term\r\n* @return object        Returns object with channel if found, else null.\r\n* @example getChannel(\"general\")\r\n```\r\n\r\n#### SlackBot.getIM(term)\r\n```\r\n* Get IM by name or ID\r\n* @param  string  term  Search term\r\n* @return object        Returns object with IM if found, else null.\r\n* @example getIM(\"xBytez\")\r\n```\r\n\r\n#### SlackBot.sendTyping(channel)\r\n```\r\n* Indicates the user/bot is typing by sending a typing message to the socket\r\n* @param  string channel  Channel/IM ID\r\n* @example sendTyping(\"C0D12BCLV\")\r\n```\r\n\r\n#### SlackBot.sendMsg(channel, text)\r\n```\r\n* Sends a message to a channel, private group or already existing IM/PM.\r\n* @param  string channel  Channel/IM ID\r\n* @param  string text  Message\r\n* @example sendMsg(\"C0D12BCLV\", \"The cake is a lie!\")\r\n```\r\n\r\n#### SlackBot.sendPM(userID, text)\r\n\r\nUsing `SlackBot.sendIM(userID, text)` will work too.\r\n```\r\n* Send a direct message, if not created, create one.\r\n* @param  string userID Destination User ID\r\n* @param  string text   Message\r\n* @example sendPM(\"U0489398N\")\r\n```\r\n\r\n#### SlackBot.getSlackData()\r\n```\r\n* Get current saved data\r\n* @return object Returns object with locally saved data\r\n* @example getSlackData()\r\n```\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}